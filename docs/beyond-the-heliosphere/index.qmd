---
title: Rè¨€èªã‹ã‚‰ã¯ã˜ã‚ã‚‹ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼èŠ¸å…¥é–€
author: "ã‚ãã‚‹ï¼ˆ@paithiov909ï¼‰"
lang: ja
fig-width: 8
fig-height: 4.5
lightbox: true
format:
  revealjs:
    transition: fade
    slide-number: "c/t"
    navigation-mode: vertical
    overview: true
    chalkboard: false
    progress: true
    history: false
    theme: [default, custom.scss]
    include-in-header: header.html
    embed-resources: false
    link-external-newwindow: true
knitr:
  opts_chunk:
    tidy: "styler"
    collapse: true
    comment: "#>"
    dev: "ragg_png"
---

# èª°ï¼Ÿ

:::{.columns}
:::{.column width="30%"}
![](https://rawcdn.githack.com/paithiov909/paithiov909/f5342cd61b45e29c34b17fc11c9bc1766eacb441/avatar.jpg){.rounded-full}
:::

:::{.column width="70%"}
- ã‚ãã‚‹ï¼ˆ[paithiov909](https://github.com/paithiov909)ï¼‰ã¨ã„ã†ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã—ã¦ã„ã‚‹
- Rãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã¤ãã£ãŸã‚Šã—ã¦ã„ã‚‹
  - [paithiov909/skiagd: A toy R wrapper for 'rust-skia'](https://github.com/paithiov909/skiagd)
  - [paithiov909/aznyan: Image filters for R, ported from https://github.com/5PB-3-4/AviUtl_OpenCV_Scripts](https://github.com/paithiov909/aznyan)
:::
:::


# æ–‡åŒ–åœã¨ã—ã¦ã®tidyverse

:::{.incremental}
- tidyverseã¯ã€tidyverseçš„ãªè€ƒãˆæ–¹ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã‚’ä¾¿åˆ©ã«ã—ã¦ã„ãã“ã¨ã‚’ã‚ã–ã—ã¦ã„ã‚‹
:::

## tidyverseãŒã‚ã–ã™ã‚‚ã® (1/2)

1. [**äººé–“ä¸­å¿ƒ** :]{.fragment .semi-fade-out fragment-index=1} [Rã§ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã—ã¦ã„ã‚‹äººã®ã“ã¨ã‚’è€ƒãˆã‚‹]{.fragment .semi-fade-in fragment-index=1}
2. [**ä¸€è²«æ€§ã®ã‚ã‚‹è¨­è¨ˆ** :]{.fragment .semi-fade-out fragment-index=2} [è¦šãˆã‚‹ã¹ãã“ã¨ã‚’æ¸›ã‚‰ã—ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’çµ„ã¿åˆã‚ã›ã¦åˆ©ç”¨ã—ã‚„ã™ãã™ã‚‹]{.fragment .semi-fade-in fragment-index=2}
3. [**çµåˆå¯èƒ½æ€§** :]{.fragment .semi-fade-out fragment-index=3} [é©åº¦ãªå¤§ãã•ã®é–¢æ•°ã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã£ã¦ã‚¿ã‚¹ã‚¯ã‚’è§£ã]{.fragment .semi-fade-in fragment-index=3}
4. [**åŒ…æ‹¬æ€§** :]{.fragment .semi-fade-out fragment-index=4} [ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‹ã‚‰ã‚µãƒãƒ¼ãƒˆã‚’å—ã‘ã‚‰ã‚Œã‚‹]{.fragment .semi-fade-in fragment-index=4}

## tidyverseãŒã‚ã–ã™ã‚‚ã® (2/2)

![ç”»åƒã¯ Hadley (2025) [A personal history of the tidyverse](https://hadley.github.io/25-tidyverse-history/) ã‹ã‚‰æŠœç²‹](https://rawcdn.githack.com/hadley/25-tidyverse-history/4dad4c08087843217677b6153ad71590f5906bd6/the-tidyverse.png)


# ã“ã‚ŒãŒRè¨€èªã®ã™ã¹ã¦ãªã®ï¼Ÿï¼Ÿ

:::{.incremental}
- ãŸã¶ã‚“ã€é•ã†ã¨æ€ã†
:::


# ã“ã®ã€Œå®‡å®™ã€ã®å¤–ã«ã¯ä½•ãŒã‚ã‚‹ï¼Ÿ

## [Another World](https://github.com/coolbutuseless/anotherworld)ã®Rè¨€èªã¸ã®ç§»æ¤

{{< video https://www.youtube.com/watch?v=LPotWAJnE_s start="720" width="100%" height="80%" >}}

## [rayrender](https://github.com/tylermorganwall/rayrender)ã«ã‚ˆã‚‹3Dè¡¨ç¾

{{< video https://www.youtube.com/watch?v=hRKx-obmFx8 start="760" width="100%" height="80%" >}}

## ggplot2ãªã©ã«ã‚ˆã‚‹[Rtistry](https://thomaslinpedersen.art/work/#category=R)

[
  ![koenderks/aRtsyã®swirl](https://rawcdn.githack.com/koenderks/aRtsy/b99d902c28c9f9f603bb615729a13c44810a353b/png/swirls/2023-05-18.png){.carousel-item}
  ![koenderks/aRtsyã®flowfield](https://rawcdn.githack.com/koenderks/aRtsy/b99d902c28c9f9f603bb615729a13c44810a353b/png/flows/2021-09-22.png){.carousel-item}
  ![koenderks/aRtsyã®segment](https://rawcdn.githack.com/koenderks/aRtsy/b99d902c28c9f9f603bb615729a13c44810a353b/png/segments/2021-08-07.png){.carousel-item}
  ![koenderks/aRtsyã®maze](https://rawcdn.githack.com/koenderks/aRtsy/b99d902c28c9f9f603bb615729a13c44810a353b/png/mazes/2021-10-04.png){.carousel-item}
]{.carousel}

[ã„ãšã‚Œã‚‚ [koenderks/aRtsy](https://github.com/koenderks/aRtsy) ã‹ã‚‰ã®æŠœç²‹]{style="color: #777; font-size: 0.7em;"}

## Rè¨€èªâ‰’ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹

:::{.incremental}
- ã€ŒRè¨€èªã¯ã€çµ±è¨ˆè§£æã‚„ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–ã«ç‰¹åŒ–ã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã€ãªã©ã¨è¨€ã‚ã‚ŒãŒã¡
- tidyverseã®æ–‡åŒ–åœã¯å‰å¤§ã ãŒã€ã€ŒRè¨€èª â¡ tidyverse â¡ ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã€ã®ã‚ˆã†ã«è€ƒãˆã¦ã—ã¾ã†ã¨ã€ã“ã®å®‡å®™ã«ã¯ã¯ã˜ã‚ã‹ã‚‰ãã‚Œã—ã‹å­˜åœ¨ã—ã¦ã„ãªã„ã¿ãŸã„ã«è¦‹ãˆã¦ã—ã¾ã†
- tidyverseãŒRè¨€èªã®å…¥ã‚Šå£ã¨ã—ã¦å®šç•ªã«ãªã£ãŸã“ã¨ã§ã€å­¦ç¿’ã¯é€²ã‚ã‚„ã™ããªã£ãŸã‚‚ã®ã®ã€å¿…ãšã—ã‚‚ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ä¸€è‰²ã§ã¯ãªã„Rè¨€èªã®å´é¢ãŒè¦‹ãˆã¥ã‚‰ããªã£ã¦ã„ã‚‹ã®ã§ã¯ï¼Ÿ
:::

## ä½ã¿æ…£ã‚ŒãŸã€Œå®‡å®™ã€ã‚’é£›ã³å‡ºãã†

ã ã£ã¦ç§ãŸã¡ã¯ã€ã“ã‚Œã‹ã‚‰ã€ã©ã“ã«ã ã£ã¦è¡Œã‘ã‚‹ã¯ãšï¼

> As the tidyverse becomes more mature, the places where the tidyverse team spends our innovation energy have started to change. **Our mission is broad and we're willing to go wherever this takes us, even if it's into new areas that we know little about.**^[Hadley (2025) [A personal history of the tidyverse](https://hadley.github.io/25-tidyverse-history/) ã‹ã‚‰ã€‚å¼·èª¿ã¯å¼•ç”¨è€…ã«ã‚ˆã‚‹]


# Rè¨€èªã§ã‚‚ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã¿ã‚ˆã†!!

## ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

:::{.incremental}
- ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãã“ã¨ã«ã‚ˆã£ã¦ã€ç”»åƒã‚„æ˜ åƒã€éŸ³æ¥½ãªã©ã®å‰µä½œç‰©ã‚’ã¤ãã‚‹æ´»å‹•ã®ã“ã¨
- ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¢ãƒ¼ãƒˆã‚„ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¢ãƒ¼ãƒˆã¨ã‹å‘¼ã°ã‚Œã‚‹ã‚ˆã†ãªã‚‚ã®ã‚’ã¤ãã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒã•ã¾ã–ã¾ãªè¨€èªã§æ›¸ã‹ã‚Œã¦ã„ã‚‹
- [OpenProcessing](https://openprocessing.org/)ã¨ã‹[NEORT](https://neort.io/popular)ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ä½œå“ã‚’çœºã‚ã¦ã„ã‚‹ã ã‘ã§ã‚‚ãŸã®ã—ã„
:::

## ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼èŠ¸

:::{.incremental}
- GLSLãªã©ã®ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼è¨€èªã‚’ä½¿ã†ã“ã¨ã«ã‚ˆã£ã¦ã‚‚ã€çµµã‚’æãã“ã¨ãŒã§ãã‚‹
  - ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã¯ã€æœ¬æ¥ã¯ã€3Dè¡¨ç¾ã«ãŠã„ã¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«é™°å½±ãªã©ã‚’æç”»ã™ã‚‹ãŸã‚ã«ä½¿ã‚ã‚Œã‚‹ã‚‚ã®
  - ä¸€æ–¹ã§ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ã¯å¹³é¢ã ã‘ã‚’ç”¨æ„ã—ã€ãã“ã«ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚’ã¤ã‹ã£ã¦è‰²ã‚’ä¹—ã›ã‚‹ã“ã¨ã§ã‚¢ãƒ¼ãƒˆã‚’ã¤ãã‚ŒãŸã‚Šã‚‚ã™ã‚‹
- ãã‚ã‚ã‚‹ã¨ã•ã¾ã–ã¾ãªè¡¨ç¾ãŒå¯èƒ½ã§ã€ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚’æ›¸ãã“ã¨ã«ã‚ˆã£ã¦è¤‡é›‘ãªè¡¨ç¾ã‚’ã¤ãã‚Šã“ã‚€ã“ã¨ã‚’ã€ä¿—ã«ã€Œã‚·ã‚§ãƒ¼ãƒ€ãƒ¼èŠ¸ã€ã¨å‘¼ã‚“ã ã‚Šã™ã‚‹
:::


# Rã§ã‚‚ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼èŠ¸ã¯ã§ãã‚‹ï¼Ÿ

:::{.incremental}
- ãµã¤ã†ã«ã¯ã§ããªã„ãŒã€ã¾ã£ãŸãä¸å¯èƒ½ã¨ã„ã†ã‚ã‘ã§ã‚‚ãªã„
:::

---

### ãµã¤ã†ã«ã¯ã§ããªã„
- Rè¨€èªã®ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯å‘¨ã‚Šã®APIã¯é™å®šçš„ã§ã€ã‚°ãƒ©ãƒ•ä»¥å¤–ã®ã‚‚ã®ã‚’æãã®ã«ã¯ã‚ã¾ã‚Šå‘ã„ã¦ã„ãªã„
- å½“ç„¶ãªãŒã‚‰ã€GLSLã®ã‚ˆã†ãªã‚·ã‚§ãƒ¼ãƒ€ãƒ¼è¨€èªã‚’æ‰±ã†ã“ã¨ã‚‚ã§ããªã„

### ãŒã€ã¾ã£ãŸãä¸å¯èƒ½ã¨ã„ã†ã‚ã‘ã§ã‚‚ãªã„
- ç”»åƒã‚’é©åˆ‡ãªãƒ‡ãƒ¼ã‚¿å½¢å¼ã§ç”¨æ„ã§ãã‚Œã°ã€ãã‚Œã‚’æç”»ã™ã‚‹ã“ã¨ã¯ã§ãã‚‹
- ãƒ•ãƒ¬ãƒ¼ãƒ ãƒãƒƒãƒ•ã‚¡ã‚’é«˜é€Ÿã«ç”¨æ„ã§ãã‚‹ã®ã§ã‚ã‚Œã°ã€æ˜ åƒè¡¨ç¾ã®ã‚ˆã†ãªã“ã¨ã‚‚ãŸã¶ã‚“å¯èƒ½

---

## Rã§ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼èŠ¸ã‚’ã‚„ã‚‹ã«ã¯

- ã¾ãšã¯ã€Rã®ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹ã§ç›´æ¥æç”»ã§ãã‚‹ã‚ˆã†ãªç”»åƒã‚’å‡ºåŠ›ã™ã‚‹ã“ã¨ã‚’ã‚ã–ã™
- ãã‚Œã‚’ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼è¨€èªã£ã½ã„ã‚³ãƒ¼ãƒ‰ã§ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã‚‰ã€ãã‚Œã¯å®Ÿè³ªçš„ã«ã€Œã‚·ã‚§ãƒ¼ãƒ€ãƒ¼èŠ¸ã€ãªã®ã§ã¯ï¼Ÿï¼Ÿ

:::{.fragment .fade-up}
### ã“ã“ã§ã®ã‚´ãƒ¼ãƒ«ğŸ¯
[Rcpp](https://www.rcpp.org/)ã‚’ä½¿ã£ã¦**ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼é¢¨ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ **ã‚’æ›¸ãã“ã¨ã«ã‚ˆã£ã¦ã€Rã®ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹ã§è¡¨ç¤ºã§ãã‚‹ç”»åƒã‚’ç”Ÿæˆã™ã‚‹
:::


# ã¨ã„ã†ã‚ã‘ã§ã€ãã†ã„ã†Rãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã¤ãã‚Šã¾ã—ãŸ

:::{.incremental}
- [paithiov909/nativeshadr: Introduction of HLSL-like syntax to Rcpp for writing pixel shaders](https://github.com/paithiov909/nativeshadr)
:::

# æŠ€è¡“çš„ãªãƒã‚¤ãƒ³ãƒˆ

:::{.incremental}
- **HLSL++**ã‚’ä½¿ã£ã¦ã€**nativeRaster**ã‚’ç›´ã«å‡ºåŠ›ã™ã‚‹Rcppã®é–¢æ•°ã‚’æ›¸ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹
:::

## nativeRaster (1/3)

- ã€ŒRã®ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹ã§ç›´æ¥æç”»ã§ãã‚‹ã‚ˆã†ãªç”»åƒã€ã‚’è¡¨ç¾ã™ã‚‹ãƒ‡ãƒ¼ã‚¿å½¢å¼
  - ãƒ”ã‚¯ã‚»ãƒ«ã®è‰²ã‚’è¡¨ã™`#00ddeeff`ã®ã‚ˆã†ãªRGBAå€¤ã‚’32ãƒ“ãƒƒãƒˆç¬¦å·ãªã—æ•´æ•°ã«è©°ã‚è¾¼ã¿ã€ãã‚Œã‚‰ã®é…åˆ—ã«ã‚ˆã£ã¦1æšã®ç”»åƒã‚’è¡¨ç¾ã—ã¦ã„ã‚‹ã‚‚ã®
  - å†…éƒ¨çš„ã«ã¯ç¬¦å·ãªã—æ•´æ•°ã ãŒã€Rè¨€èªã«ã¯ç¬¦å·ãªã—æ•´æ•°ã«ã‚ãŸã‚‹å‹ãŒå­˜åœ¨ã—ãªã„ãŸã‚ã€Rã‚³ãƒ³ã‚½ãƒ¼ãƒ«ä¸Šã§ã¯integer matrixã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹
  - ç”»åƒã®é«˜ã•Ã—å¹…ã«å¯¾å¿œã™ã‚‹æ¬¡å…ƒã‚’ã‚‚ã¤

## nativeRaster (2/3)

```{r}
#| label: nara1
#| echo: true
#| fig-alt: "navyã ã‘ã§åŸ‹ã‚ãŸnativeRasterç”»åƒ"
## è‰²ï¼ˆã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ï¼‰ã«å¯¾å¿œã™ã‚‹æ•´æ•°è¡¨ç¾ã¸ã®å¤‰æ›ã¯colorfastã‚„farverã§ã§ãã‚‹
colorfast::col_to_int(c("navy", "transparent", "#00ddeeff", "#fff"))

## `-8388608L`ã¯"navy"ãªã®ã§ã€ã“ã®å€¤ã§åŸ‹ã‚ã‚‹ã¨ã€å…¨ã¦ã®ãƒ”ã‚¯ã‚»ãƒ«ãŒ"navy"ã«ãªã‚‹
rast <- rep_len(-8388608L, 360 * 640)
dim(rast) <- c(360, 640) # height, width
class(rast) <- "nativeRaster"

grid::grid.newpage()
grid::grid.raster(rast, interpolate = FALSE)
```

## nativeRaster (3/3)

:::{.panel-tabset}
### Rcppã‚³ãƒ¼ãƒ‰

```{r}
#| label: nara2
#| echo: true
## nativeRasterã‚’è¿”ã™Rcppã®é–¢æ•°ã¯
## nativeshadrã‚’ä½¿ã†ã¨ã€ãŸã¨ãˆã°æ¬¡ã®ã‚ˆã†ã«æ›¸ã‘ã‚‹
Rcpp::sourceCpp(code = R"{
// [[Rcpp::depends(RcppParallel, nativeshadr)]]
#include <nativeshadr.h>

uint32_t gradient(int2 wh, RMatrix<int> nr, const vvd& uniforms) {
  float2 uv = float2(wh) / float2(nr.ncol(), nr.nrow());
  float4 col = float4(uv.x, uv.y, .6, 1);
  return int4_to_icol(clamp(col * 255, 0, 255));
}

// [[Rcpp::export]]
Rcpp::IntegerVector test_gradient(Rcpp::IntegerMatrix nr) {
  const vvd uniforms;
  return vectorize_shader(gradient)(nr, uniforms);
}
}")
```

### Rã‚³ãƒ¼ãƒ‰

```{r}
#| label: nara3
#| echo: true
#| fig-alt: "ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã§ç”Ÿæˆã—ãŸã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³"
library(nativeshadr)
## `nr_new(width, height, fill)`ã¯å˜è‰²ã®nativeRasterã‚’è¿”ã™ã ã‘ã®é–¢æ•°
img <- test_gradient(nr_new(640, 360, "white"))
grid::grid.newpage()
grid::grid.raster(img, interpolate = FALSE)
```

### å¯¾å¿œã™ã‚‹GLSLã‚³ãƒ¼ãƒ‰

[GLSLã®æ›¸ãæ–¹ã¯ç’°å¢ƒã«ã‚ˆã£ã¦ç•°ãªã‚‹ãŒã€ã“ã“ã§ã¯[glsl-canvas](https://marketplace.visualstudio.com/items?itemName=circledev.glsl-canvas)ã‚’æƒ³å®šã—ã¦ã„ã‚‹]{style="color: #888;"}

```glsl
precision mediump float;

uniform vec2 u_resolution;
uniform vec2 u_mouse;
uniform float u_time;

void main() {
  vec2 uv = gl_FragCoord.xy / u_resolution.xy;
  gl_FragColor = vec4(uv.x, uv.y, .6, 1);
}
```
:::

## HLSL++ (1/2)

- ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼^[ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚„ãƒ”ã‚¯ã‚»ãƒ«ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã‚’å¿µé ­ã«ãŠã„ã¦ã„ã¾ã™]ã¨ã„ã†ã®ã¯ã€ã‚ˆã†ã™ã‚‹ã«ã€è‰²ã‚’ç½®ãä½ç½®ã¨ãã®ä»–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ`uniform`ï¼‰ã‚’å—ã‘å–ã£ã¦ã€ãã‚Œã‚‰ã«å¿œã˜ã¦æ­£è¦åŒ–ã•ã‚ŒãŸRGBAå€¤ã‚’è¿”ã™ã‚ˆã†ãªé–¢æ•°
  - ã“ã‚Œã‚’æ›¸ãã‚„ã™ãã™ã‚‹ãŸã‚ã«`vec4`ã¿ãŸã„ãªãƒ™ã‚¯ãƒˆãƒ«å‹ã®å®šç¾©ã¨ã€ãƒ™ã‚¯ãƒˆãƒ«ã®è¦ç´ ã«ä¾¿åˆ©ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®**swizzle**ã¨å‘¼ã°ã‚Œã‚‹è¨˜æ³•ã‚’ããªãˆã¦ã„ã‚‹
  - å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚„ãã®åå‰ãªã©ã¯æ–¹è¨€ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã‚‚ã®ã®ã€ãã®ç¨®é¡ã‚„ã€ãã®ä»–ã®æ–‡æ³•ã¯ã©ã‚Œã‚‚åŒã˜ã‚ˆã†ãªæ„Ÿã˜

## HLSL++ (2/2)

- ãã®ãŸã‚ã€[HLSL++](https://github.com/redorav/hlslpp)ã®ã‚ˆã†ãªã€ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼è¨€èªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚„æ–‡æ³•ã‚’æ¨¡å€£ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æŒã¡è¾¼ã‚€ã“ã¨ã§ã€C++ã®ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦**ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼é¢¨ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ **ã‚’æ›¸ãã“ã¨ãŒã§ãã‚‹
- ãã†ã—ã¦æ›¸ã„ãŸ**ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼é¢¨ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ **ã‚’æããŸã„ã‚µã‚¤ã‚ºã®nativeRasterã®ã™ã¹ã¦ã®ãƒ”ã‚¯ã‚»ãƒ«ã«ã¤ã„ã¦vectorizeã—ã¦ã‚„ã‚Œã°ã€ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã®å‹•ä½œã‚’Rcppã®é–¢æ•°ã¨ã—ã¦ãŠãŠã‚€ã­å†ç¾ã§ãã‚‹


# Rã«ã‚ˆã‚‹ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼èŠ¸ã®å®Ÿè·µä¾‹

:::{.incremental}
- ãŠä¸–è¾ã«ã‚‚ã€Œç°¡å˜ã€ã¨ã¯ã„ãˆãªã„ãŒã€è¡¨ç¾ã¨ã—ã¦ã¯å®Ÿéš›ã«ã„ã‚ã„ã‚ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹
:::

## ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’è©•ä¾¡ã™ã‚‹ä¾‹ (1/2)

:::{.panel-tabset}

### C++ã‚³ãƒ¼ãƒ‰

```cpp
{{< include shader/retro.cpp >}}
```

### Rã‚³ãƒ¼ãƒ‰

```r
## nativeRasterã®ãƒ–ãƒ¬ãƒ³ãƒ‰ã‚’ã™ã‚‹ã®ã« paithiov909/aznyan ã‚’ä½¿ã£ã¦ã„ã‚‹
library(ggplot2)

cap <- ragg::agg_capture(width = 480, height = 360)

gp <-
  ggplot(mtcars, aes(x = wt, y = mpg, colour = cyl)) +
  geom_point(size = 8) +
  theme_dark() +
  scale_color_viridis_c(option = "viridis")
print(gp)

rast <- cap(native = TRUE)
dev.off()

Rcpp::sourceCpp("shader/retro.cpp")

gifski::save_gif(
  {
    for (time in seq_len(200)) {
      fd <- test_retro(rast, list(iTime = time))
      grid::grid.newpage()
      grid::grid.raster(aznyan::blend_hardlight(fd, rast), interpolate = FALSE)
    }
  },
  gif_file = "anim-retro-ggplot.gif",
  width = 480,
  height = 360,
  delay = 1 / 25,
  progress = TRUE
)
```

:::

## ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’è©•ä¾¡ã™ã‚‹ä¾‹ (2/2)

{{< video video/anim-retro-ggplot.mp4 title="ãƒ¬ãƒˆãƒ­ãªã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’åˆæˆã—ãŸggplot2ã®ã‚°ãƒ©ãƒ•" height="540" >}}

## [ggfx](https://ggfx.data-imaginist.com/articles/custom_filters.html)ã¨çµ„ã¿åˆã‚ã›ãŸä¾‹

:::{.panel-tabset}

### C++ã‚³ãƒ¼ãƒ‰

```cpp
{{< include shader/ripple.cpp >}}
```
### Rã‚³ãƒ¼ãƒ‰

```{r}
#| label: ggfx-ripple
#| echo: true
#| fig-alt: "ggfxã§ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ã‹ã‘ãŸã‚°ãƒ©ãƒ•"
#| output-location: slide
library(ggplot2)
library(ggfx)

Rcpp::sourceCpp("shader/ripple.cpp")

ripple <- \(x, freq = 64.0, amp = .01, offset = c(0, 0)) {
  vp <- get_viewport_area(x)
  vp <- test_ripple(vp, list(freq = freq, amp = amp, offset = offset))
  set_viewport_area(x, vp)
}

ggplot(mtcars, aes(x = factor(gear), y = disp)) +
  with_custom(
    geom_boxplot(aes(fill = as.factor(gear))),
    filter = ripple
  ) +
  labs(title = "ggfxã§ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ã‹ã‘ãŸã‚°ãƒ©ãƒ•")
```

:::

## ãƒ¬ã‚¤ãƒãƒ¼ãƒãƒ³ã‚°ï¼ˆ[Surf Space](https://www.shadertoy.com/view/wflcRS)ï¼‰

{{< video video/anim-shadertoy-wflcRS.mp4 title="ãƒ¬ã‚¤ãƒãƒ¼ãƒãƒ³ã‚°ï¼ˆSurf Spaceï¼‰" height="540" >}}

## [GLSL Sandbox](https://glslsandbox.com/e#109628.0)ã‹ã‚‰ã®ç§»æ¤ (1/2)

:::{.panel-tabset}

### C++ã‚³ãƒ¼ãƒ‰

```cpp
{{< include shader/traverse.cpp >}}
```

### Rã‚³ãƒ¼ãƒ‰

```r
library(nativeshadr)

Rcpp::sourceCpp("shader/traverse.cpp")

gifski::save_gif(
  {
    for (time in seq(3 * pi, 8 * pi, by = .0314)) {
      img <- test_traverse(nr_new(640, 360, "white"), list(iTime = time))
      grid::grid.newpage()
      grid::grid.raster(img, interpolate = FALSE)
    }
  },
  gif_file = "anim-traverse.gif",
  width = 640,
  height = 360,
  delay = 1 / 30,
  progress = TRUE
)
```

:::

## [GLSL Sandbox](https://glslsandbox.com/e#109628.0)ã‹ã‚‰ã®ç§»æ¤ (2/2)

{{< video video/anim-traverse.mp4 title="ã€Œå®‡å®™ã€ã‚’é£›ã³å‡ºãã†ï¼" >}}


# ã¾ã¨ã‚

:::{.incremental}
- Rcppã§**ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼é¢¨ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ **ã‚’æ›¸ãã“ã¨ã«ã‚ˆã£ã¦ã€Rã®ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹ã§ç›´æ¥æç”»ã§ãã‚‹ã‚ˆã†ãªç”»åƒã‚’å‡ºåŠ›ã™ã‚Œã°ã€Rã§ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼èŠ¸ãŒã§ãã‚‹
- ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«nativeshadrã¨ã„ã†Rãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã¤ãã£ãŸ
- Rè¨€èªã®ä¸–ç•Œã¯ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã ã‘ã˜ã‚ƒãªã„ã‹ã‚‚ï¼ï¼Ÿ ä½ã¿æ…£ã‚ŒãŸã€Œå®‡å®™ã€ã‚’é£›ã³å‡ºã™å‹‡æ°—ã‚’æŒã¨ã†
:::

# Enjoyâœ¨{.center}
